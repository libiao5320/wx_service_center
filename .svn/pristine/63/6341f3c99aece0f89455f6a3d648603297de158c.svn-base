<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">


<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<mapper namespace="com.royao.mapper.DstoreMapper">

	<resultMap id="RMDstore" type="com.royao.model.Dstore">
        <result property="storeId" column="store_id"/>
        <result property="storeName" column="store_name"/>
        <result property="gradeId" column="grade_id"/>
        <result property="sellerName" column="seller_name"/>
        <result property="storeLoginPhone" column="store_login_phone"/>
        <result property="scId" column="sc_id"/>
        <result property="storeCompanyName" column="store_company_name"/>
        <result property="provinceId" column="province_id"/>
        <result property="cityId" column="city_id"/>
        <result property="areaInfo" column="area_info"/>
        <result property="storeAddress" column="store_address"/>
        <result property="storeZip" column="store_zip"/>
        <result property="storeState" column="store_state"/>
        <result property="storeSort" column="store_sort"/>
        <result property="storeTime" column="store_time"/>
        <result property="storeDescribe" column="store_describe"/>
        <result property="storeLabel" column="store_label"/>
        <result property="pactImg" column="pact_img"/>
        <result property="storePhone" column="store_phone"/>
        <result property="storeZy" column="store_zy"/>
        <result property="storeServicecredit" column="store_servicecredit"/>
        <result property="storeCollect" column="store_collect"/>
        <result property="storeWorkingtime" column="store_workingtime"/>
        <result property="storeSalesGross" column="store_sales_gross"/>
        <result property="storeSales" column="store_sales"/>
        <result property="sort" column="sort"/>
        <result property="remark" column="remark"/>
        <result property="lbs" column="lbs"/>
        <result property="status" column="status"/>
	</resultMap>
	
	<!-- 用于select查询公用抽取的列 -->
	<sql id="Dstorecolumns">
	    <![CDATA[
		store_id,store_name,grade_id,seller_name,store_login_phone,sc_id,store_company_name,province_id,city_id,area_info,store_address,store_zip,store_state,store_sort,store_time,store_describe,store_label,pact_img,store_phone,store_zy,store_servicecredit,store_collect,store_workingtime,store_sales_gross,store_sales,sort,remark,lbs,status
	    ]]>
	</sql>

	<!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->
	<insert id="insert" useGeneratedKeys="true" keyProperty="storeId">
    <![CDATA[
        INSERT INTO d_store (
        	store_id ,
        	store_name ,
        	grade_id ,
        	seller_name ,
        	store_login_phone ,
        	sc_id ,
        	store_company_name ,
        	province_id ,
        	city_id ,
        	area_info ,
        	store_address ,
        	store_zip ,
        	store_state ,
        	store_sort ,
        	store_time ,
        	store_describe ,
        	store_label ,
        	pact_img ,
        	store_phone ,
        	store_zy ,
        	store_servicecredit ,
        	store_collect ,
        	store_workingtime ,
        	store_sales_gross ,
        	store_sales ,
        	sort ,
        	remark ,
        	lbs ,
        	status 
        ) VALUES (
        	#{storeId} ,
        	#{storeName} ,
        	#{gradeId} ,
        	#{sellerName} ,
        	#{storeLoginPhone} ,
        	#{scId} ,
        	#{storeCompanyName} ,
        	#{provinceId} ,
        	#{cityId} ,
        	#{areaInfo} ,
        	#{storeAddress} ,
        	#{storeZip} ,
        	#{storeState} ,
        	#{storeSort} ,
        	#{storeTime} ,
        	#{storeDescribe} ,
        	#{storeLabel} ,
        	#{pactImg} ,
        	#{storePhone} ,
        	#{storeZy} ,
        	#{storeServicecredit} ,
        	#{storeCollect} ,
        	#{storeWorkingtime} ,
        	#{storeSalesGross} ,
        	#{storeSales} ,
        	#{sort} ,
        	#{remark} ,
        	#{lbs} ,
        	#{status} 
        )
    ]]>
		<!--	
			oracle: order="BEFORE" SELECT sequenceName.nextval AS ID FROM DUAL 
			DB2: order="BEFORE"" values nextval for sequenceName
		<selectKey resultType="java.lang.Long" order="BEFORE" keyProperty="userId">
			SELECT sequenceName.nextval AS ID FROM DUAL 
        </selectKey>
		-->
	</insert>
    
	<update id="update" >
    <![CDATA[
        UPDATE d_store SET
	        store_name = #{storeName} ,
	        grade_id = #{gradeId} ,
	        seller_name = #{sellerName} ,
	        store_login_phone = #{storeLoginPhone} ,
	        sc_id = #{scId} ,
	        store_company_name = #{storeCompanyName} ,
	        province_id = #{provinceId} ,
	        city_id = #{cityId} ,
	        area_info = #{areaInfo} ,
	        store_address = #{storeAddress} ,
	        store_zip = #{storeZip} ,
	        store_state = #{storeState} ,
	        store_sort = #{storeSort} ,
	        store_time = #{storeTime} ,
	        store_describe = #{storeDescribe} ,
	        store_label = #{storeLabel} ,
	        pact_img = #{pactImg} ,
	        store_phone = #{storePhone} ,
	        store_zy = #{storeZy} ,
	        store_servicecredit = #{storeServicecredit} ,
	        store_collect = #{storeCollect} ,
	        store_workingtime = #{storeWorkingtime} ,
	        store_sales_gross = #{storeSalesGross} ,
	        store_sales = #{storeSales} ,
	        sort = #{sort} ,
	        remark = #{remark} ,
	        lbs = #{lbs} ,
	        status = #{status} 
        WHERE 
	        store_id = #{storeId} 
    ]]>
	</update>

    <delete id="delete">
    <![CDATA[
        DELETE FROM d_store WHERE
        store_id = #{id} 
    ]]>
    </delete>
    
    <select id="queryById" resultMap="RMDstore">
		SELECT <include refid="Dstorecolumns" />
	    <![CDATA[
		    FROM d_store 
	        WHERE 
		        store_id = #{id} 
	    ]]>
	</select>
	

		
    <select id="listWithPageCount" resultType="long">
        SELECT count(*) FROM d_store where 1=1

    </select>
    
    <!--
    	分页查询已经使用Dialect进行分页,也可以不使用Dialect直接编写分页
    	因为分页查询将传 offset,pageSize,lastRows 三个参数,不同的数据库可以根于此三个参数属性应用不同的分页实现
    -->
    <select id="listWithPage" resultType="java.util.HashMap">
    	SELECT <include refid="Dstorecolumns" />
	    FROM d_store 
		where 1=1 
		limit #begin# , #end#
    </select>
	
	
	
	  <select id="queryAll" resultMap="RMDstore">
    	SELECT <include refid="Dstorecolumns" />
	    FROM d_store 
	  </select>
	  
	    <select id="queryByCondition" resultMap="RMDstore">
    	SELECT <include refid="Dstorecolumns" />
	    FROM d_store 
		
		<where>	      				
	       <if test="@Ognl@isNotEmpty(storeId)">
				AND store_id = #{storeId}
			</if>
	       <if test="@Ognl@isNotEmpty(storeName)">
				AND store_name = #{storeName}
			</if>
	       <if test="@Ognl@isNotEmpty(gradeId)">
				AND grade_id = #{gradeId}
			</if>
	       <if test="@Ognl@isNotEmpty(sellerName)">
				AND seller_name = #{sellerName}
			</if>
	       <if test="@Ognl@isNotEmpty(storeLoginPhone)">
				AND store_login_phone = #{storeLoginPhone}
			</if>
	       <if test="@Ognl@isNotEmpty(scId)">
				AND sc_id = #{scId}
			</if>
	       <if test="@Ognl@isNotEmpty(storeCompanyName)">
				AND store_company_name = #{storeCompanyName}
			</if>
	       <if test="@Ognl@isNotEmpty(provinceId)">
				AND province_id = #{provinceId}
			</if>
	       <if test="@Ognl@isNotEmpty(cityId)">
				AND city_id = #{cityId}
			</if>
	       <if test="@Ognl@isNotEmpty(areaInfo)">
				AND area_info = #{areaInfo}
			</if>
	       <if test="@Ognl@isNotEmpty(storeAddress)">
				AND store_address = #{storeAddress}
			</if>
	       <if test="@Ognl@isNotEmpty(storeZip)">
				AND store_zip = #{storeZip}
			</if>
	       <if test="@Ognl@isNotEmpty(storeState)">
				AND store_state = #{storeState}
			</if>
	       <if test="@Ognl@isNotEmpty(storeSort)">
				AND store_sort = #{storeSort}
			</if>
	       <if test="@Ognl@isNotEmpty(storeTime)">
				AND store_time = #{storeTime}
			</if>
	       <if test="@Ognl@isNotEmpty(storeDescribe)">
				AND store_describe = #{storeDescribe}
			</if>
	       <if test="@Ognl@isNotEmpty(storeLabel)">
				AND store_label = #{storeLabel}
			</if>
	       <if test="@Ognl@isNotEmpty(pactImg)">
				AND pact_img = #{pactImg}
			</if>
	       <if test="@Ognl@isNotEmpty(storePhone)">
				AND store_phone = #{storePhone}
			</if>
	       <if test="@Ognl@isNotEmpty(storeZy)">
				AND store_zy = #{storeZy}
			</if>
	       <if test="@Ognl@isNotEmpty(storeServicecredit)">
				AND store_servicecredit = #{storeServicecredit}
			</if>
	       <if test="@Ognl@isNotEmpty(storeCollect)">
				AND store_collect = #{storeCollect}
			</if>
	       <if test="@Ognl@isNotEmpty(storeWorkingtime)">
				AND store_workingtime = #{storeWorkingtime}
			</if>
	       <if test="@Ognl@isNotEmpty(storeSalesGross)">
				AND store_sales_gross = #{storeSalesGross}
			</if>
	       <if test="@Ognl@isNotEmpty(storeSales)">
				AND store_sales = #{storeSales}
			</if>
	       <if test="@Ognl@isNotEmpty(sort)">
				AND sort = #{sort}
			</if>
	       <if test="@Ognl@isNotEmpty(remark)">
				AND remark = #{remark}
			</if>
	       <if test="@Ognl@isNotEmpty(lbs)">
				AND lbs = #{lbs}
			</if>
	       <if test="@Ognl@isNotEmpty(status)">
				AND status = #{status}
			</if>
		</where>
	  </select>

	
</mapper>

